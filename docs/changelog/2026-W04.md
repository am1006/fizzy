# Fizzy Changelog - Week 04, 2026

**Period**: January 13 - January 20, 2026
**Total Commits**: 87
**Contributors**: Andy Smith (18), Rosa Gutierrez (11), Jorge Manrubia (8), Adrien Maston (8), Jay Ohms (7), Zoltan Hosszu (5), Stanko Krtalic (5), Mike Dalessio (5), Alexander Zaytsev (5), Denis Svara (2), Rob Zolkos (1)

## Highlights

This week saw significant work on **mobile app bridge components** (PR #2307), a major **relative URLs migration** for better portability across environments, and several important **bug fixes** around fragment caching, data integrity when moving cards between boards, and the entropy/stalled card system. The Lexxy rich text editor was updated to version 0.7.0 with nascent table support (currently hidden behind a feature flag).

## Detailed Changes

### New Features

#### Webhook Enable/Disable All Buttons (PR #2377 - Rob Zolkos)
- File: `app/views/webhooks/form/_actions.html.erb`
- Added "Enable all" and "Disable all" buttons to the webhook event selection form
- Quality-of-life improvement for users managing webhooks with many event types

#### Admin Dashboard: Paid Account Stats (Mike Dalessio)
- Files: `saas/app/controllers/admin/stats_controller.rb`, `saas/app/views/admin/stats/show.html.erb`
- Added visibility into paid subscription metrics for the SaaS admin dashboard

#### Self-Assignment Controller (PR #2383 - Mike Dalessio)
- New file: `app/controllers/cards/self_assignments_controller.rb`
- Created a dedicated controller for self-assignment to fix the "M" hotkey issue with cached user data
- The controller uses `Current.user` at request time rather than relying on cached URLs

### Bug Fixes

#### "M" Hotkey Using Stale User from Fragment Cache (PR #2383 - Mike Dalessio)
- The keyboard shortcut for self-assignment was using a URL baked into fragment cache, which contained the wrong user ID when another user viewed a cached card preview
- Solution: Created `Cards::SelfAssignmentsController` that resolves the current user at request time
- This is a good example of the tension between aggressive caching and dynamic content

#### Completing a Step Now Removes Stalled Status (PR #2380 - Mike Dalessio)
- Files: `app/helpers/entropy_helper.rb`, `app/javascript/controllers/bubble_controller.js`
- Previously, completing a step on a card didn't update the "stalled" indicator in the UI
- Added `updatedAt` to stalled bubble options so JavaScript can check if the card was recently updated
- Now refreshes the bubble via Turbo Stream when a step is updated

#### Action Text Missing Attachables (PR #2382 - Jorge Manrubia)
- When rich text content referenced an attachable (like an image) that no longer existed, Action Text would raise an error
- Initial fix added a `_missing_attachable.html.erb` partial, but the real solution was updating Lexxy in the SaaS lockfile

#### Orphaned Watches and Pins When Cards Move to Private Boards (Rosa Gutierrez)
- Files: `app/models/card/accessible.rb`, `app/jobs/card/clean_inaccessible_data_job.rb`
- When a card is moved to a private board, users who watched or pinned that card but don't have access to the new board would still see it in their lists
- New `clean_inaccessible_data` method deletes pins and watches for users without board access
- Also handles the case when a user's board access is revoked

#### Bootsnap Ruby VM Crash (PR #2379 - Stanko Krtalic)
- Bumped Bootsnap to v1.21.1 to fix occasional Ruby VM crashes

#### Card Column Button Active State (PR #2359 - Andy Smith)
- File: `app/helpers/columns_helper.rb`
- Card column buttons now show a disabled state when the card is already in that column

#### Comment Content Overlapping Reaction Button (PR #2357 - Andy Smith)
- File: `app/assets/stylesheets/comments.css`
- Fixed CSS issue where long comment content could overlap with the reaction button

### Infrastructure / Architecture

#### Relative URLs Migration (PR #2318 - Rosa Gutierrez)
- Files: `config/initializers/active_storage.rb`, `script/migrations/convert-absolute-attachment-urls-to-relative.rb`
- **Major change**: Avatar and rich text attachment URLs are now stored as relative paths instead of absolute URLs
- **Why**: Absolute URLs cause problems when:
  - Content created in beta environment is viewed in production (or vice versa)
  - Importing/exporting data between self-hosted and SaaS versions
  - Hostname changes occur
- The `to_rich_text_attributes` method on ActiveStorage::Blob now generates relative paths
- Migration scripts provided for both directions (absolute-to-relative and rollback)
- Webhook event URLs remain absolute (external consumers need full URLs)

#### turbo-rails Update (PR #2399 - Rosa Gutierrez)
- Updated to turbo-rails 2.0.21
- Required a test fix for notification broadcast behavior

#### Dependency Updates (PR #2352 - Stanko Krtalic)
- Updated both development and runtime dependencies across Gemfile.lock and Gemfile.saas.lock

### Mobile App / Bridge Components

#### Mobile Bridge Components Merge (PR #2307 - Jay Ohms, Adrien Maston, Denis Svara)
This large PR adds infrastructure for the Hotwire Native mobile app integration:

**Title Controller Refactoring**
- File: `app/javascript/controllers/bridge/title_controller.js`
- Renamed from `page_controller` to `title_controller`
- Uses `IntersectionObserver` to detect when the page header scrolls out of view
- Notifies the native app bridge so it can show/hide the native title bar

**Dialog Focus Handling**
- File: `app/javascript/controllers/dialog_controller.js`
- Consolidated dialog focus handling into the main dialog controller
- Removed the separate `dialog_focus_controller.js`
- Distinguishes between touch and mouse devices to set appropriate autofocus behavior

**Form and Insets Controllers**
- Bridge components for handling form submissions and safe area insets on mobile

**Native CSS Adjustments**
- File: `app/assets/stylesheets/native.css`
- Various mobile-specific layout fixes (footer height, "watch" card spacing, new card form bottom notch)

### Rich Text / Lexxy

#### Table Support (Hidden) (PR #2292 - Jorge Manrubia, Zoltan Hosszu)
- Updated Lexxy to 0.7.0beta with table support
- File: `app/assets/stylesheets/lexxy.css` - Added extensive CSS for table rendering
- File: `app/assets/stylesheets/rich-text-content.css` - Table display styles
- **Note**: Table button is currently hidden via CSS (`f9d85570e`) - feature is not yet ready for users
- Attempted and reverted wrapping tables in a div for overflow handling

### UI/UX Improvements

#### Popup and Dialog Alignment (PR #2392, PR #2384 - Andy Smith)
- File: `app/assets/stylesheets/popup.css`
- Created alignment classes for popups (`popup--align-start`, `popup--align-end`)
- Board and tag picker dialogs now align without JavaScript math calculations
- Column dialogs properly aligned

#### Board Selector Hidden for Closed Cards (Andy Smith)
- File: `app/views/cards/display/perma/_board.html.erb`
- The board selector button is now hidden when viewing a closed card (makes sense - closed cards can't be moved)

#### Disabled Menu Item Styles (PR #2366 - Alexander Zaytsev)
- File: `app/assets/stylesheets/popup.css`
- Disabled popup buttons no longer have hover styles or pointer events

#### Text Balance Utility (PR #2355 - Alexander Zaytsev)
- File: `app/assets/stylesheets/utilities.css`
- Added `.txt-balance` CSS utility class
- Applied to magic link instructions for better text wrapping

#### Card Background Image Selectors (PR #2375 - Andy Smith)
- File: `app/assets/stylesheets/card-columns.css`
- Fixed incorrect CSS class selectors for cards with background images

## Areas of Active Development

1. **Mobile App Integration** - The `mobile/bridge-components` branch was merged, indicating active mobile development. Watch for more bridge-related changes.

2. **Card Permissions/Access** - Multiple fixes around what happens when cards move to private boards or users lose access. The `Card::Accessible` concern is growing.

3. **Caching vs. Dynamic Content** - The "M" hotkey fix reveals ongoing tension between aggressive fragment caching and user-specific content.

4. **Rich Text (Lexxy)** - Table support is in progress but hidden. Expect more work here.

## Things to Watch

**Breaking Changes**: None this week.

**Deprecations**: The separate `dialog_focus_controller.js` has been removed - its functionality is now in the main dialog controller.

**Testing Pattern**: The `Cards::SelfAssignmentsController` shows a good pattern for avoiding cache-related user confusion - use controllers that resolve the current user at request time rather than baking user IDs into cached content.

## Recommendations

Commits worth reviewing more closely:

1. **Relative URLs Migration** (`235890e66`, `bf6fe75b7`) - If you work with attachments or import/export, understand how URLs are now stored.

2. **Card::Accessible concern** (`ee636f199`) - The pattern for cleaning up inaccessible data when permissions change is important for maintaining data integrity.

3. **Dialog Controller Focus Handling** (`44732a345`) - If you work with dialogs and mobile, understand the new touch vs. mouse focus behavior.

4. **Self-Assignments Controller** (`2527f0736`) - Good example of solving fragment cache + user-specific content issues.
